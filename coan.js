(function(){var c=function(g){try{console.log(g)}catch(h){}};var b=function(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};var e=$("#javascript"),d=$("#main"),a=$("#error"),f=$("#check");a.click(function(){a.hide();f.removeClass("invisible");e.show().focus()});e.click(function(){if(e.hasClass("span6")){$("#main").removeClass("offset3").removeClass("span6").addClass("span12").find(".span6").removeClass("span6").addClass("span12")}});$(document).on({mouseenter:function(){var h=$(this),g=h.parent().find("span").index(h);h.parent().find("div:eq("+g+")").addClass("hover")},mouseleave:function(){$(this).parent().find("div").removeClass("hover")}},"ol > div > span");f.click(function(h){var g=e.val();e.attr("readonly","readonly");f.button("loading");$.post(APP_URI+"checking/",{javascript:g}).done(function(w){e.attr("readonly",false);f.button("reset");if(w.ok){alert(I18N.ok)}else{if(w.errors){f.addClass("invisible");alert(w.errors_alert);var q="<ol>";for(var p=0,l=w.errors.length;p<l;p++){q+="<li "+(w.errors[p].error?'class="error"':"")+">";q+=b(w.errors[p].code).replace(/\s/g,"&nbsp;");q+="</li>";if(w.errors[p].error){var m=0,o=1,y="",t=false,u="";while(m<w.errors[p].error.length){for(var x in w.errors[p].error){if(w.errors[p].error[x].column==o){y+="<span>^</span>";u+="<div>"+w.errors[p].error[x].brief+"</div>";m=m+1;t=true}}o=o+1;if(t){t=false}else{y+="&nbsp"}}q+="<div>"+y+"<br/>"+u+"</div>"}}q+="</ol>";e.hide();a.html(q).show();var r=a.find(".error");if(r.size()>0){$("body").animate({scrollTop:r.first().offset().top-50},500)}}}})})})();
!function(e){"use strict";var t=function(t,i){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,i)};t.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.data(),r=i.is("input")?"val":"html";e+="Text",n.resetText||i.data("resetText",i[r]()),i[r](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?i.addClass(t).attr(t,t):i.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=function(i){return this.each(function(){var n=e(this),r=n.data("button"),o="object"==typeof i&&i;r||n.data("button",r=new t(this,o)),"toggle"==i?r.toggle():i&&r.setState(i)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var i=e(t.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery);
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(d,b){var g="social-likes";var m=g+"__";var f=g+"_opened";var p=location.protocol==="https:"?"https:":"http:";var l={facebook:{counterUrl:"https://graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22{url}%22&callback=?",convertNumber:function(q){return q.data[0].total_count},popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}",popupWidth:600,popupHeight:500},twitter:{counterUrl:p+"//urls.api.twitter.com/1/urls/count.json?url={url}&callback=?",convertNumber:function(q){return q.count},popupUrl:p+"//twitter.com/intent/tweet?url={url}&text={title}",popupWidth:600,popupHeight:450,click:function(){if(!/[\.:\-–—]\s*$/.test(this.options.title)){this.options.title+=":"}return true}},mailru:{counterUrl:p+"//connect.mail.ru/share_count?url_list={url}&callback=1&func=?",convertNumber:function(r){for(var q in r){if(r.hasOwnProperty(q)){return r[q].shares}}},popupUrl:p+"//connect.mail.ru/share?share_url={url}&title={title}",popupWidth:550,popupHeight:360},vkontakte:{counterUrl:p+"//vk.com/share.php?act=count&url={url}&index={index}",counter:function(t,q){var s=l.vkontakte;if(!s._){s._=[];if(!window.VK){window.VK={}}window.VK.Share={count:function(u,v){s._[u].resolve(v)}}}var r=s._.length;s._.push(q);d.getScript(c(t,{index:r})).fail(q.reject)},popupUrl:p+"//vk.com/share.php?url={url}&title={title}",popupWidth:550,popupHeight:330},odnoklassniki:{counterUrl:p+"//www.odnoklassniki.ru/dk?st.cmd=shareData&ref={url}&cb=?",convertNumber:function(q){return q.count},popupUrl:p+"//www.odnoklassniki.ru/dk?st.cmd=addShare&st._surl={url}",popupWidth:550,popupHeight:360},plusone:{counterUrl:p+"//share.yandex.ru/gpp.xml?url={url}",counter:function(s,q){var r=l.plusone;if(r._){q.reject();return}if(!window.services){window.services={}}window.services.gplus={cb:function(t){r._.resolve(t)}};r._=q;d.getScript(c(s)).fail(q.reject)},popupUrl:"https://plus.google.com/share?url={url}",popupWidth:700,popupHeight:500},pinterest:{counterUrl:p+"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?",convertNumber:function(q){return q.count},popupUrl:p+"//pinterest.com/pin/create/button/?url={url}&description={title}",popupWidth:630,popupHeight:270}};var k={promises:{},fetch:function(q,t,w){if(!k.promises[q]){k.promises[q]={}}var u=k.promises[q];if(!w.forceUpdate&&u[t]){return u[t]}else{var s=d.extend({},l[q],w);var r=d.Deferred();var v=s.counterUrl&&c(s.counterUrl,{url:t});if(d.isFunction(s.counter)){s.counter(v,r)}else{if(s.counterUrl){d.getJSON(v).done(function(y){try{var x=y;if(d.isFunction(s.convertNumber)){x=s.convertNumber(y)}r.resolve(x)}catch(z){r.reject()}}).fail(r.reject)}else{r.reject()}}u[t]=r.promise();return u[t]}}};d.fn.socialLikes=function(q){return this.each(function(){var s=d(this);var r=s.data(g);if(r){if(d.isPlainObject(q)){r.update(q)}}else{r=new j(s,d.extend({},d.fn.socialLikes.defaults,q,i(s)));s.data(g,r)}})};d.fn.socialLikes.defaults={url:window.location.href.replace(window.location.hash,""),title:document.title,counters:true,zeroes:false,wait:500,popupCheckInterval:500,singleTitle:"Share"};function j(q,r){this.container=q;this.options=r;this.init()}j.prototype={init:function(){this.container.addClass(g);this.single=this.container.hasClass(g+"_single");this.initUserButtons();this.number=0;this.container.on("counter."+g,d.proxy(this.updateCounter,this));var q=this.container.children();this.countersLeft=q.length;this.makeSingleButton();this.buttons=[];q.each(d.proxy(function(r,s){this.buttons.push(new e(d(s),this.options))},this));if(this.options.counters){this.timer=setTimeout(d.proxy(this.appear,this),this.options.wait)}else{this.appear()}},initUserButtons:function(){if(!this.userButtonInited&&window.socialLikesButtons){d.extend(true,l,socialLikesButtons)}this.userButtonInited=true},makeSingleButton:function(){if(!this.single){return}var q=this.container;q.addClass(g+"_vertical");q.wrap(d("<div>",{"class":g+"_single-w"}));var t=q.parent();var s=d("<div>",{"class":h("widget","single")});var r=d(o('<div class="{buttonCls}"><span class="{iconCls}"></span>{title}</div>',{buttonCls:h("button","single"),iconCls:h("icon","single"),title:this.options.singleTitle}));s.append(r);t.append(s);s.click(function(){var u=g+"__widget_active";s.addClass(u);q.css({left:-(q.width()-s.width())/2,top:-q.height()});a(q);n(q,function(){s.removeClass(u)});return false});this.widget=s},update:function(q){if(!q.forceUpdate&&q.url===this.options.url){return}this.number=0;this.countersLeft=this.buttons.length;if(this.widget){this.widget.find("."+g+"__counter").remove()}d.extend(this.options,q);for(var r=0;r<this.buttons.length;r++){this.buttons[r].update(q)}},updateCounter:function(s,q,r){if(r){this.number+=r;if(this.single){this.getCounterElem().text(this.number)}}this.countersLeft--;if(this.countersLeft===0){this.appear();this.container.addClass(g+"_ready");this.container.trigger("ready."+g,this.number)}},appear:function(){this.container.addClass(g+"_visible")},getCounterElem:function(){var q=this.widget.find("."+m+"counter_single");if(!q.length){q=d("<span>",{"class":h("counter","single")});this.widget.append(q)}return q}};function e(r,q){this.widget=r;this.options=d.extend({},q);this.detectService();if(this.service){this.init()}}e.prototype={init:function(){this.detectParams();this.initHtml();this.initCounter()},update:function(q){d.extend(this.options,{forceUpdate:false},q);this.widget.find("."+g+"__counter").remove();this.initCounter()},detectService:function(){var r=this.widget[0].classList||this.widget[0].className.split(" ");for(var s=0;s<r.length;s++){var q=r[s];if(l[q]){this.service=q;d.extend(this.options,l[q]);return}}},detectParams:function(){var r=this.widget.data();if(r.counter){var q=parseInt(r.counter,10);if(isNaN(q)){this.options.counterUrl=r.counter}else{this.options.counterNumber=q}}if(r.title){this.options.title=r.title}if(r.url){this.options.url=r.url}},initHtml:function(){var s=this.options;var v=this.widget;var q=v.find("a");if(q.length){this.cloneDataAttrs(q,v)}var t=d("<span>",{"class":this.getElementClassNames("button"),text:v.text()});if(s.clickUrl){var r=c(s.clickUrl,{url:s.url,title:s.title});var u=d("<a>",{href:r});this.cloneDataAttrs(v,u);v.replaceWith(u);this.widget=v=u}else{v.click(d.proxy(this.click,this))}v.removeClass(this.service);v.addClass(this.getElementClassNames("widget"));t.prepend(d("<span>",{"class":this.getElementClassNames("icon")}));v.empty().append(t);this.button=t},initCounter:function(){if(this.options.counters){if(this.options.counterNumber){this.updateCounter(this.options.counterNumber)}else{var q={counterUrl:this.options.counterUrl,forceUpdate:this.options.forceUpdate};k.fetch(this.service,this.options.url,q).always(d.proxy(this.updateCounter,this))}}},cloneDataAttrs:function(t,q){var s=t.data();for(var r in s){if(s.hasOwnProperty(r)){q.data(r,s[r])}}},getElementClassNames:function(q){return h(q,this.service)},updateCounter:function(r){r=parseInt(r,10)||0;var s={"class":this.getElementClassNames("counter"),text:r};if(!r&&!this.options.zeroes){s["class"]+=" "+g+"__counter_empty";s.text=""}var q=d("<span>",s);this.widget.append(q);this.widget.trigger("counter."+g,[this.service,r])},click:function(t){var r=this.options;var s=true;if(d.isFunction(r.click)){s=r.click.call(this,t)}if(s){var q=c(r.popupUrl,{url:r.url,title:r.title});q=this.addAdditionalParamsToUrl(q);this.openPopup(q,{width:r.popupWidth,height:r.popupHeight})}return false},addAdditionalParamsToUrl:function(q){var s=d.param(d.extend(this.widget.data(),this.options.data));if(d.isEmptyObject(s)){return q}var r=q.indexOf("?")===-1?"?":"&";return q+r+s},openPopup:function(q,u){var t=Math.round(screen.width/2-u.width/2);var s=0;if(screen.height>u.height){s=Math.round(screen.height/3-u.height/2)}var r=window.open(q,"sl_"+this.service,"left="+t+",top="+s+",width="+u.width+",height="+u.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");if(r){r.focus();this.widget.trigger("popup_opened."+g,[this.service,r]);var v=setInterval(d.proxy(function(){if(!r.closed){return}clearInterval(v);this.widget.trigger("popup_closed."+g,this.service)},this),this.options.popupCheckInterval)}else{location.href=q}}};function i(t){function s(w,x){return x.toUpper()}var q={};var v=t.data();for(var r in v){var u=v[r];if(u==="yes"){u=true}else{if(u==="no"){u=false}}q[r.replace(/-(\w)/g,s)]=u}return q}function c(q,r){return o(q,r,encodeURIComponent)}function o(q,r,s){return q.replace(/\{([^\}]+)\}/g,function(t,u){return u in r?(s?s(r[u]):r[u]):t})}function h(s,r){var q=m+s;return q+" "+q+"_"+r}function n(s,u){function r(v){if((v.type==="keydown"&&v.which!==27)||d(v.target).closest(s).length){return}s.removeClass(f);t.off(q,r);if(d.isFunction(u)){u()}}var t=d(document);var q="click touchstart keydown";t.on(q,r)}function a(r){var u=10;if(document.documentElement.getBoundingClientRect){var t=parseInt(r.css("left"),10);var s=parseInt(r.css("top"),10);var q=r[0].getBoundingClientRect();if(q.left<u){r.css("left",u-q.left+t)}else{if(q.right>window.innerWidth-u){r.css("left",window.innerWidth-q.right-u+t)}}if(q.top<u){r.css("top",u-q.top+s)}else{if(q.bottom>window.innerHeight-u){r.css("top",window.innerHeight-q.bottom-u+s)}}}r.addClass(f)}d(function(){d("."+g).socialLikes()})}));

